<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Home</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="" />
<meta name="author" content="" />
<!-- css -->
<link href="../css/bootstrap.min.css" rel="stylesheet" />
<link href="../css/fancybox/jquery.fancybox.css" rel="stylesheet">
<link href="../css/flexslider.css" rel="stylesheet" />
<link href="../css/style.css" rel="stylesheet" />
<link href="../css/gallery-1.css" rel="stylesheet">
<link href="../css/magnific-popup.css" rel="stylesheet">

</head>
<body style="margin: 0; padding: 0; overflow: auto; scroll: no;">
	<div id="wrapper" class="home-page">
		<div class="topbarpage"></div>
		<div class="headerpage"></div>

		<section id="inner-headline" style="margin-top: 90px;">
			<div class="container">
				<div class="row">
					<div class="col-lg-12">
						<h2 class="pageTitle">优秀作品筛选</h2>
					</div>
				</div>
			</div>
		</section>
		<section id="content">
			<div class="container"
				style="width: 90%; margin-top: 2em; background-color: #f6f6f6; border-radius: 10px; padding: 20px 20px;">

				<div class="row">
					<div id="isotope-gallery-container">
						<div id="pic0" class="col-md-4 col-sm-6 col-xs-12 gallery-item-wrapper artwork creative" style="display:none;">
							<div class="gallery-item">
								<div class="gallery-thumb">
									<div class="flexslider">
										<ul class="slides">
											<li>
												<img id="pic0num0" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic0num1" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic0num2" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic0num3" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic0num4" src="/img/works/noPic.jpg" alt="" />
											</li>
										</ul>
									</div>
								</div>
								<div class="gallery-details">
									<div class="editContent">
										<div class="checkboxFour">
											<input type="checkbox" value="0" id="checkbox0" name="" />
											<label for="checkbox0"></label>
										</div>
										
									</div>
								</div>
							</div>
						</div> 
						
						<div id="pic1" class="col-md-4 col-sm-6 col-xs-12 gallery-item-wrapper artwork creative" style="display:none;">
							<div class="gallery-item">
								<div class="gallery-thumb">
									<div class="flexslider">
										<ul class="slides">
											<li>
												<img id="pic1num0" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic1num1" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic1num2" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic1num3" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic1num4" src="/img/works/noPic.jpg" alt="" />
											</li>
										</ul>
									</div>
								</div>
								<div class="gallery-details">
									<div class="editContent">
										<div class="checkboxFour">
											<input type="checkbox" value="1" id="checkbox1" name="" />
											<label for="checkbox1"></label>
										</div>
										
									</div>
								</div>
							</div>
						</div> 

						<div id="pic2" class="col-md-4 col-sm-6 col-xs-12 gallery-item-wrapper artwork creative" style="display:none;">
							<div class="gallery-item">
								<div class="gallery-thumb">
									<div class="flexslider">
										<ul class="slides">
											<li>
												<img id="pic2num0" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic2num1" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic2num2" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic2num3" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic2num4" src="/img/works/noPic.jpg" alt="" />
											</li>
										</ul>
									</div>
								</div>
								<div class="gallery-details">
									<div class="editContent">
										<div class="checkboxFour">
											<input type="checkbox" value="2" id="checkbox2" name="" />
											<label for="checkbox2"></label>
										</div>
										
									</div>
								</div>
							</div>
						</div> 

						<div id="pic3" class="col-md-4 col-sm-6 col-xs-12 gallery-item-wrapper artwork creative" style="display:none;">
							<div class="gallery-item">
								<div class="gallery-thumb">
									<div class="flexslider">
										<ul class="slides">
											<li>
												<img id="pic3num0" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic3num1" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic3num2" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic3num3" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic3num4" src="/img/works/noPic.jpg" alt="" />
											</li>
										</ul>
									</div>
								</div>
								<div class="gallery-details">
									<div class="editContent">
										<div class="checkboxFour">
											<input type="checkbox" value="3" id="checkbox3" name="" />
											<label for="checkbox3"></label>
										</div>
									</div>
								</div>
							</div>
						</div> 

						<div id="pic4" class="col-md-4 col-sm-6 col-xs-12 gallery-item-wrapper artwork creative" style="display:none;">
							<div class="gallery-item">
								<div class="gallery-thumb">
									<div class="flexslider">
										<ul class="slides">
											<li>
												<img id="pic4num0" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic4num1" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic4num2" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic4num3" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic4num4" src="/img/works/noPic.jpg" alt="" />
											</li>
										</ul>
									</div>
								</div>
								<div class="gallery-details">
									<div class="editContent">
										<div class="checkboxFour">
											<input type="checkbox" value="4" id="checkbox4" name="" />
											<label for="checkbox4"></label>
										</div>
									</div>
								</div>
							</div>
						</div> 

						<div id="pic5" class="col-md-4 col-sm-6 col-xs-12 gallery-item-wrapper artwork creative" style="display:none;">
							<div class="gallery-item">
								<div class="gallery-thumb">
									<div class="flexslider">
										<ul class="slides">
											<li>
												<img id="pic5num0" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic5num1" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic5num2" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic5num3" src="/img/works/noPic.jpg" alt="" />
											</li>
											<li>
												<img id="pic5num4" src="/img/works/noPic.jpg" alt="" />
											</li>
										</ul>
									</div>
								</div>
								<div class="gallery-details">
									<div class="editContent">
										<div class="checkboxFour">
											<input type="checkbox" value="5" id="checkbox5" name="" />
											<label for="checkbox5"></label>
										</div>
									</div>
								</div>
							</div>
						</div> 


					</div>
				</div>

				<div class="pricing-action" style="background-color: inherit;">
					<button class="btn btn-primary" id="lastPagePic"
						style="border-color: #002e5b; background-color: #002e5b; color: rgba(255, 255, 255, 0.84);">上一页</button>

					<button class="btn btn-primary" id="nextPagePic"
						style="border-color: #002e5b; background-color: #002e5b; color: rgba(255, 255, 255, 0.84);">下一页</button>

				</div>

			</div>

		</section>
		<section>
			<div class="pricing-action" style="background-color: inherit;">
				<button class="btn btn-primary" id="choosePics"
					style="border-color: #002e5b; background-color: #002e5b; color: rgba(255, 255, 255, 0.84);">作品筛选完成</button>

			</div>
		</section>

		<div class="footerpage"></div>
	</div>
	<script src="../js/jquery.js"></script>
	<script src="../js/jquery.easing.1.3.js"></script>
	<script src="../js/bootstrap.min.js"></script>
	<script src="../js/jquery.fancybox.pack.js"></script>
	<script src="../js/jquery.fancybox-media.js"></script>
	<script src="../js/jquery.flexslider.js"></script>
	<script src="../js/animate.js"></script>

	<script src="../js/modernizr.custom.js"></script>
	<script src="../js/jquery.isotope.min.js"></script>
	<script src="../js/jquery.magnific-popup.min.js"></script>
	<script src="../js/animate.js"></script>
	<script src="../js/custom.js"></script>
	<script src="../js/jquery.cookie.js"></script>
	<script src="../js/all.js"></script>

	<script type="text/javascript">
		$(function() {
			var username = $.cookie('username');
			if (username != null && username != "null") {
				$(".topbarpage").load("/topbarLogin.html");
			} else {
				$(".topbarpage").load("/topbar.html");
			}
			
			var pageIndex = 0;
			var choosenList = [];
			getPics(pageIndex);
			
			window.onload = function() {
				getUserAuth(username);
				if(pageIndex == 0)
					$("#lastPagePic").css("display","none");
				else
					$("#lastPagePic").css("display","inline-block");
			}
			
			
			
			$(".headerpage").load("/header.html");
			$(".footerpage").load("/footer.html");
			
			
			
			$("#lastPagePic").live("click",function(){
				pageIndex--;
				getPics(pageIndex);
			})
			
			$("#nextPagePic").live("click",function(){
				getChoosenPics(pageIndex,choosenList);
				pageIndex++;
				getPics(pageIndex);
			})
			
			$("#choosePics").live("click",function(){
				getChoosenPics(pageIndex,choosenList);
				console.log(JSON.stringify(choosenList));
				$.ajax({　　
					type: "POST", // 用POST方式传输
					contentType: "application/json",
					data: JSON.stringify(choosenList),
					traditional: true, 
		            url : "/teacher/saveExcellentProductions",
					error: function(data) {
						console.log("choosen pics finish error");　　
					},
					success: function(data) {
						alert("照片筛选成功！");
						window.location.href="/index.html";
					}
				});
				
			})
			
		});
		
		function getPics(pageIndex){
			$.ajax({　　
				type: "POST", // 用POST方式传输
				dataType: "JSON", // 数据格式:JSON
				contentType: "application/json",
	            url:"/teacher/getProductions?pageNumber="+pageIndex,
				error: function(data) {
					console.log(data);　　
				},
				success: function(data) {
					if(data.length>0){
						for(var i=0;i<data.length;i++){
							$("#pic"+i).css("display","inline-block");
							var picsUrl = data[i].production.split("<==>");
							for(var j=0;j<picsUrl.length;j++){
								$("#pic"+i+"num"+j).css("display","inline-block");
								$("#pic"+i+"num"+j).attr("src","data:image/gif;base64,"+picsUrl[j]);
							}
							$("#pic"+i).children(".gallery-item").find(".editContent").append('<h5 style="display: inline-block;">'+data[i].studentName+'</h5>')
							$("#checkbox"+i).attr("value", data[i].questionAnswerId);
						}
						if(data.length<6){
							$("#nextPagePic").css("display","none");
							for(var j=data.length;j<6;j++){
								$("#pic"+j).css("display","none");
							}
						}
					}else{
						alert("已经没有其他展示了！");
					}
					
						
					
				}
			});
		}
		
		function getChoosenPics(pageIndex,choosenList){
			var choosenIndex = 0;
			$("input[type='checkbox']:checkbox:checked").each(function() {
				choosenIndex = $(this).val();
				if($.inArray(choosenIndex, choosenList)==-1)
					choosenList.push(choosenIndex);
			});
			
		}
		
	</script>

</body>
</html>